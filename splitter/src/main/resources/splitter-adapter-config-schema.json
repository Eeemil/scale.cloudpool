{
  "id": "http://elastisys.com/splitter-adapter-schema#",
  "$schema": "http://json-schema.org/draft-04/schema#",
  "description": "configuration schema for the Splitter cloud adapter",
  "definitions": {
    "basicCredentials": {
      "type": "object",
      "properties": {
        "username": { "type": "string" },
        "password": { "type": "string" }
      },
      "required": [ "username", "password" ]
    },
    "certificateCredentials": {
      "type": "object",
      "properties": {
        "keystorePath": { "type": "string" },
        "keystorePassword": { "type": "string" },
        "keyPassword": { "type": "string" },
        "keystoreType": { "enum": ["PKCS12", "JKS"]}
      },
      "required": [ "keystorePath", "keystorePassword", "keystoreType" ]
    },
    "remoteCloudAdapter": {
      "type": "object",
      "properties": {
        "cloudAdapterHost": { "type": "string" },
        "cloudAdapterPort": { "type": "number", "minimum": 1, "maximum": 65535 }
      },
      "required": [ "cloudAdapterHost", "cloudAdapterPort" ]
    },
    "poolSizeCalculator": { "enum": [ "STRICT" ] }
  },
  "type": "object",
  "title": "AdapterConfig",
  "properties": {
    "poolSizeCalculator": {
      "adapters": {
        "title": "PrioritizedRemoteCloudAdapter",
        "description": "Configuration for each remote cloud adapter",
        "type": "array",
        "items": {
          "allOf": [
            {
              "$ref": "#/definitions/remoteCloudAdapter"
            },
            {
              "properties": {
                "priority": {
                  "type": "number",
                  "minimum": 0,
                  "maximum": 100
                }
              }
            },
            {
              "anyOf": [
                {
                  "$ref": "#/definitions/basicCredentials"
                },
                {
                  "$ref": "#/definitions/certificateCredentials"
                }
              ]
            }
          ]
        },
        "minItems": 1,
        "uniqueItems": true
      }
    },
    "required": [ "poolSizeCalculator", "adapters" ]
  }
}
